parameters:
  paste.ttl: 604800
  redis.scheme: 'tcp'
  redis.host: 'localhost'
  redis.port: 6379

framework:
  secret: '%env(SECRET)%'
  http_method_override: true
  router:
    resource: '%kernel.root_dir%/../cfg/routing.prod.yml'
    strict_requirements: '%kernel.debug%'
  templating:
    engines: ['twig']
  session:
    cookie_secure: true

monolog:
  handlers:
    main:
      type: 'fingers_crossed'
      action_level: 'notice'
      handler: 'nested'
    nested:
      type: 'stream'
      path: '%kernel.logs_dir%/%kernel.name%.log'
      level: 'debug'

twig:
  debug: '%kernel.debug%'
  strict_variables: '%kernel.debug%'

services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  Paste\:
    resource: '../src/*'
    exclude: '../src/{Entity,Exception}'

  Paste\Controller\:
    resource: '../src/Controller/*'
    public: true
    tags: ['controller.service_arguments']

  Predis\Client:
    arguments:
      -
        scheme: '%redis.scheme%'
        host: '%redis.host%'
        port: '%redis.port%'

  Predis\ClientInterface:
    alias: 'Predis\Client'

  Doctrine\Common\Cache\PredisCache:
    alias: 'Doctrine\Common\Cache\Cache'

  Paste\Security\HashGenerator:
    arguments:
      $secret: '%kernel.secret%'

  Paste\Repository\PasteRepository:
    arguments:
      $default_ttl: '%paste.ttl%'
